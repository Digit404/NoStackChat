<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0 interactive-widget=resizes-content">
    <title>NoStack</title>
    <link rel="manifest" href="/manifest.json">
    <link rel="shortcut icon" href="/res/icon-512.png" type="image/png">
    <link rel="stylesheet" href="/common.css">
    <link rel="stylesheet" href="/default-modern.css">
    <link rel="stylesheet" href="./style.css">
    <script src="/darkmode.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify/dist/purify.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/powershell.min.js"></script>
</head>

<body>
    <div class="sidebar"></div>
    <div id=main>
        <div id="title-block">
            <h1 class="title">NoStack</h1>
            <p class="description">A serverless frontend for AI chat models.</p>
        </div>
        <button class="icon" id="settings-button">settings</button>
        <a id="new-chat-button" class="icon" href="./">add_comment</a>
        <button id="model-select">
            <img class="model-icon mini" src="./res/GPT_standard.png"></img>
            <div id="current-model">Select a model</div>
            <span class="icon">keyboard_arrow_down</span>
        </button>
        <div id="model-popup" class="hidden">
        </div>
        <div id="messages-viewport">
            <div id="messages">
            </div>
        </div>
        <div class="controls-container">
            <div id="pending-images-container" class="pending-images-container"></div>
            <textarea id="prompt" placeholder="Enter prompt..." autocomplete="off" rows="1"></textarea>
            <div class="toolbar">
                <button id="send" class="icon">send</button>
                <button class="icon" id="add">add</button>
            </div>
        </div>
    </div>
    <div id="popup" class="popup-background hidden">
        <div id="popup-content" class="popup-content info">
            <span id="popup-icon" class="popup-header icon">warning</span>
            <div id="popup-text">
                <strong>Heads up:</strong> As a general rule, you shouldn't paste your API key into a website you don't
                fully trust. This site is <em>fully static</em>—no servers, and only talks to AI providers.<br>
                <a href="https://github.com/Digit404/NoStackChat" target="_blank" rel="noopener noreferrer"> Source code
                    on GitHub, audit it yourself. </a>
                <hr>
                <ul>
                    <li>This site does <b>not</b> externally log, store, or access your API keys or prompts. Everything
                        stays on your browser.</li>
                    <li>By default, your API keys are not saved in your browser, but you can enable it if you wish.</li>
                    <li>Only official AI provider servers ever see your keys.</li>
                    <li>For maximum safety, use a <b>restricted or temporary API key</b>.</li>
                    <li>Be careful with browser extensions—some can read anything on any website.</li>
                    <li>You can open DevTools and audit the whole source. No secrets here.</li>
                </ul>
            </div>
            <button id="popup-close" class="button pill">OK, got it</button>
        </div>
    </div>
    <div id="settings-popup" class="popup-background hidden">
        <div id="settings-content" class="popup-content">
            <h1>Settings</h1>
            <div class="settings-section">
                <h2>API Keys</h2>
                <div class="settings-item">
                    <label for="openai-api-key">OpenAI API Key</label>
                    <div class="api-key-container collapsed">
                        <button class="icon key-button" id="openai-key-button">key</button>
                        <input type="password" id="openai-api-key" placeholder="Enter OpenAI API key" autocomplete="off"
                            class="api-key-input">
                        <!-- <button id="verify-openai-button" class="icon verify-button">check</button> -->
                    </div>
                </div>
                <div class="settings-item">
                    <label for="anthropic-api-key">Anthropic API Key</label>
                    <div class="api-key-container collapsed">
                        <button class="icon key-button" id="anthropic-key-button">key</button>
                        <input type="password" id="anthropic-api-key" placeholder="Enter Anthropic API key"
                            autocomplete="off" class="api-key-input">
                        <!-- <button id="verify-anthropic-button" class="icon verify-button">check</button> -->
                    </div>
                </div>
                <div class="settings-item">
                    <label for="saveKey">Save API keys</label>
                    <div class="spacer"></div>
                    <input type="checkbox" id="saveKey" class="switch">
                </div>
            </div>
            <div class="settings-section">
                <h2>Generation</h2>
                <div class="settings-item">
                    <label for="system-prompt">System prompt</label>
                    <textarea id="system-prompt" placeholder="A helpful assistant" rows="5"
                        class="text-input"></textarea>
                </div>
                <div class="settings-item">
                    <label for="temperature">Temperature</label>
                    <div class="slider-container">
                        <input type="range" id="temperature" min="0" max="2" step="0.1" value="1" class="small-slider">
                        <span id="temperature-value">1.0</span>
                    </div>
                </div>
            </div>
            <div class="settings-section">
                <h2>Appearance</h2>
                <div class="settings-item">
                    <label for="theme-select">Theme</label>
                    <select id="theme-select" class="option-select">
                        <option value="system">System</option>
                        <option value="dark" class="dark">Dark</option>
                        <option value="light" class="light">Light</option>
                    </select>
                </div>
                <div class="settings-item">
                    <label for="hue">Hue</label>
                    <div class="slider-container">
                        <input type="range" name="hue" id="hue" min="0" max="360" step="1" value="230"
                            class="small-slider">
                        <span id="hue-value">230</span>
                    </div>
                </div>
                <div class="settings-item">
                    <label for="saturation">Saturation</label>
                    <div class="slider-container">
                        <input type="range" name="saturation" id="saturation" min="0" max="100" step="1" value="5"
                            class="small-slider">
                        <span id="saturation-value">5</span>
                    </div>
                </div>
                <div class="settings-item">
                    <label for="font-select">Font</label>
                    <select id="font-select" class="option-select">
                        <option value="sans">Sans-serif</option>
                        <option value="mono" class="mono">Monospace</option>
                        <option value="serif" class="serif">Serif</option>
                        <option value="slab" class="slab">Slab Serif</option>
                    </select>
                </div>
            </div>
        </div>
    </div>
    <div id="model-settings-popup" class="popup-background hidden">
        <div id="model-settings-content" class="popup-content">
            <h1>Show or hide models</h1>
            <div class="model-list-container">
            </div>
        </div>
    </div>
    <script src="./nostack.js" defer></script>
</body>

</html>